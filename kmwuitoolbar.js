(function() {if(!window.keyman.ui.name)try{var a=window.keyman,h=a.osk,n=a.util;if(n.isTouchDevice())throw"";a.ui={C:!1,c:null,Oa:null,v:null,w:null,X:null,F:null,ha:null,i:null,R:null,u:null,m:[],l:null,W:[],D:[],j:"as",b:[],fa:0,Da:1,Ba:null,A:null,G:"",za:0,Aa:0,languages:[],M:!1,I:0,P:""};var p=a.ui;p.name="toolbar";p.a={oa:"Languages",ra:"Turn off KeymanWeb keyboards",qa:"Off",ua:"Show On Screen Keyboard",pa:"Select language"};p.a.SelectKeyboardPre="Select ";p.a.SelectKeyboardSuf="keyboard";p.a.AltKeyboardsPre=
"Alternate keyboards for ";p.a.AltKeyboardsSuf="";p.a.ca="Central America";p.a.sa="South America";p.a.na="North America";p.a.eu="Europe";p.a.af="Africa";p.a.me="Middle east";p.a.as="Asia";p.a.oc="Oceania";p.createNode=function(c,b,d,e){var f=document.createElement(c);b&&(f.id=b);d&&(f.className=d);e&&(f.innerHTML=e);if("a"==c||"area"==c||"map"==c)f.Sa=function(){return!1};return f};p.initialize=p.Qa=function(){if(a.initialized&&!p.C){var c=document.getElementById("KeymanWebControl");if(!c){if(null==
document.body)return;c=document.createElement("DIV");c.id="KeymanWebControl";document.body.insertBefore(c,document.body.firstChild);p.va=c}c.style.visibility="hidden";c.style.maxHeight="35px";p.C=!0;if(!n.isTouchDevice()){n.linkStyleSheet(n.getOption("resources")+"ui/toolbar/kmwuitoolbar.css");p.g={};p.g.ca={t:p.a.ca,o:"49,52,65,54,68,57,71,56,73,59,75,60,93,61,94,58,97,58,101,59,107,60,114,64,115,68,114,77,104,74,98,75,96,78,95,82,90,81,85,80,82,76,78,74,74,73,65,68,57,61"};p.g.sa={t:p.a.sa,o:"82,82,95,82,96,78,98,75,104,74,114,77,120,79,124,83,126,87,141,90,142,97,138,103,135,113,127,116,123,124,115,131,112,132,109,138,117,139,140,141,141,146,134,148,114,145,109,148,100,148,91,143,91,130,96,111,89,102,83,95,77,89"};
p.g.na={t:p.a.na,o:"0,3,0,37,24,32,35,37,43,47,49,52,65,54,68,57,71,56,73,59,75,60,93,61,93,57,103,49,118,41,126,41,136,23,148,17,156,14,164,5,164,0,57,0,35,5,25,9,5,8"};p.g.eu={t:p.a.eu,o:"145,29,146,19,158,14,171,6,187,2,206,1,217,4,227,11,231,16,231,33,227,34,225,35,225,37,227,39,228,44,228,47,227,48,223,46,218,44,215,43,208,43,203,45,202,48,205,52,201,52,195,49,189,50,187,48,177,48,175,49,166,50,147,33"};p.g.af={t:p.a.af,o:"150,58,158,50,166,50,175,49,177,48,187,48,189,50,195,49,201,52,205,52,207,53,221,75,229,75,231,77,231,85,227,92,232,101,237,106,237,112,227,115,222,118,206,125,199,127,193,127,185,111,183,104,180,87,168,89,153,85,143,71,147,60"};
p.g.me={t:p.a.me,o:"205,52,202,48,203,45,208,43,215,43,218,44,223,46,227,48,232,48,239,48,240,49,239,53,242,60,243,65,237,76,231,77,229,75,221,75,207,53"};p.g.as={t:p.a.as,o:"219,1,221,6,228,12,231,16,231,33,227,34,225,35,225,37,227,39,229,45,232,48,239,48,240,49,239,53,242,60,243,65,249,70,252,81,259,87,271,87,278,95,289,100,303,101,311,98,320,98,323,98,323,84,311,81,308,73,307,65,317,57,330,50,334,44,348,36,364,38,375,34,375,8,355,8,336,5,292,1,285,0,219,0"};p.g.oc={t:p.a.oc,o:"288,117,289,107,303,101,311,98,323,98,323,84,333,77,344,73,362,80,369,88,375,96,375,141,352,143,323,142,316,136,310,130,291,130"};
p.c=p.createNode("div","kmw_controls");p.c.style.display="block";var b=p.createNode("a","kmw_controls_start",null," ");b.href="https://keyman.com/developer/keymanweb/";b.target="_blank";p.c.appendChild(b);p.w=p.createNode("div","kmw_btn_keyboards","kmw_button");p.w.title=p.a.pa;b=p.createNode("a",null,"kmw_button_a");b.href="#";b.onclick=p.Ka;b.appendChild(p.createNode("div","kmw_img_keyboards","kmw_img"));b.appendChild(p.createNode("div",null,"kmw_a",p.a.oa));b.appendChild(p.createNode("div",null,
"kmw_drop"));p.w.appendChild(b);p.u=p.createNode("div","kmw_selector");p.s=p.createNode("div","kmw_selector_regions");p.v=p.createNode("div","kmw_browsemap");b=p.createNode("img","kmw_region_browsemap");b.src=n.getOption("resources")+"ui/toolbar/blank.gif";b.useMap="#kmw_worldgrey16";p.v.appendChild(b);var d=p.createNode("map","kmw_worldgrey16");d.name="kmw_worldgrey16";for(var e in p.g)b=p.createNode("area"),b.shape="poly",b.alt="",b.href="#",b.title=p.g[e].t,b.Pa="true",b.onclick=function(b){return function(c){return p.Z(c,
b)}}(e),b.onmouseover=function(b){return function(c){return p.ea(c,b)}}(e),b.onmouseout=function(b){return function(c){return p.ka(c,b)}}(e),b.coords=p.g[e].o,d.appendChild(b);b=p.createNode("area");b.shape="default";b.Ra="true";b.alt="";b.onclick=p.h;d.appendChild(b);p.v.appendChild(d);p.s.appendChild(p.v);p.l={};b=p.createNode("ul");for(e in p.g)d=p.createNode("li"),p.l[e]=p.createNode("a",null,null,p.g[e].t),p.l[e].href="#",p.l[e].onclick=function(b){return function(c){return p.Z(c,b)}}(e),p.l[e].onmouseover=
function(b){return function(c){return p.ea(c,b)}}(e),p.l[e].onmouseout=function(b){return function(c){return p.ka(c,b)}}(e),d.appendChild(p.l[e]),b.appendChild(d);p.s.appendChild(b);p.u.appendChild(p.s);p.w.appendChild(p.u);p.c.appendChild(p.w);p.c.appendChild(p.ha=p.createNode("div","kmw_bar_off","kmw_bar"));p.F=p.createNode("div","kmw_btn_off","kmw_button_selected");b=p.createNode("a",null,"kmw_button_a");b.href="#";b.onclick=p.Ea;b.title=p.a.ra;b.appendChild(p.createNode("div","kmw_img_off","kmw_img"));
b.appendChild(p.createNode("div",null,"kmw_a",p.a.qa));p.F.appendChild(b);p.c.appendChild(p.F);p.c.appendChild(p.X=p.createNode("div","kmw_control_keyboards","kmw_button"));p.c.appendChild(p.R=p.createNode("div","kmw_bar_osk","kmw_bar"));p.i=p.createNode("div","kmw_btn_osk","kmw_button");b=p.createNode("a",null,"kmw_button_a");b.href="#";b.onclick=p.La;b.title=p.a.ua;b.appendChild(p.createNode("div","kmw_img_osk","kmw_img"));p.i.appendChild(b);p.c.appendChild(p.i);p.c.appendChild(p.createNode("div",
"kmw_controls_end",null," "));e=p.createNode("div");e.id="kmw_map_preload";p.c.appendChild(e);p.c.appendChild(p.createNode("br",null,"kmw_clear"));c.appendChild(p.c);p.M=!0;p.I&&clearTimeout(p.I);p.I=setTimeout(p.N,2E3);n.attachDOMEvent(document.body,"click",p.da,!1);p.j="eu";a.focusLastActiveElement()}}};p.Ta=function(){var c=p.c;c&&c.parentNode.removeChild(c);(c=p.va)&&c.parentNode.removeChild(c)};p.N=function(){if(p.M){p.M=!1;var c=0;p.m={};var b=a.getKeyboards();b.sort(p.Ma);for(c=p.s.childNodes.length;0<
c;c--)"kmw_selector_region"==p.s.childNodes[c-1].className&&p.s.removeChild(p.s.childNodes[c-1]);for(var d in p.g){p.m[d]=p.createNode("div",null,"kmw_selector_region");for(var e=p.createNode("div",null,"kmw_keyboard_col"),f=0,g=0,l="",k=0;k<b.length;k++)if(b[k].RegionCode==d){var m=a.util.getLanguageCodes(b[k].LanguageCode);m[0]!=l&&(l=m[0],f++)}f=Number(((f+3)/4).toFixed(0));l="";for(k=0;k<b.length;k++)if(b[k].RegionCode==d)if(m=a.util.getLanguageCodes(b[k].LanguageCode),m[0]==l)m=p.languages[l].f,
m.push?m.push(b[k]):p.languages[l].f=m.concat(b[k]);else{l=m[0];p.languages[l]={id:b[k].LanguageCode,name:b[k].LanguageName,f:[b[k]]};0==g%f&&0<g&&(p.m[d].appendChild(e),e=p.createNode("div",null,3==g/f?"kmw_keyboard_col_right":"kmw_keyboard_col"));g++;m=p.createNode("div",null,"kmw_language");var q=p.createNode("a",null,null,b[k].LanguageName);q.href="#";q.onclick=function(b){return function(c){return p.ja(c,b)}}(p.languages[l]);m.appendChild(q);e.appendChild(m);c++}p.m[d].appendChild(e);p.m[d].appendChild(p.createNode("div",
null,"kmw_clear"));p.s.appendChild(p.m[d])}p.Ca();p.Z(null,p.j);p.U();a.focusLastActiveElement()}};p.Ma=function(c,b){return c.RegionCode<b.RegionCode?-2:c.RegionCode>b.RegionCode?2:c.LanguageName<b.LanguageName?-1:c.LanguageName>b.LanguageName?1:0};p.J=function(c){for(var b=0;b<p.b.length;b++)if(p.b[b].lang.id==c.id)return b;return null};p.ba=function(c,b){var d=p.J(c);if(null==d){if(p.b.length>=p.Da){var e=2147483647;d=null;for(var f=0;f<p.b.length;f++)p.b[f].Y<e&&(d=f,e=p.b[f].Y);null!=d&&(e=p.b[d],
p.D[e.lang.id]=null,p.W[e.lang.id]=null,p.X.removeChild(e.O),p.b=0==d?p.b.slice(d+1):d==p.b.length-1?p.b.slice(0,d):p.b.slice(0,d).concat(p.b.slice(d+1)))}d=p.createNode("div",null,"kmw_button");e=p.createNode("a",null,"kmw_button_a"+(1<c.f.length?" kmw_norightgap":""));e.href="#";f=p.a.SelectKeyboardPre+b.Name;var g=p.a.SelectKeyboardSuf;0>f.toLowerCase().indexOf(g.toLowerCase())&&(f=f+" "+g);e.title=f;e.onclick=function(b){return p.ja(b,c)};e.appendChild(p.createNode("div","kmw_img_kbd","kmw_img"));
p.P=p.truncate(c.name,28);e.appendChild(p.createNode("div",null,"kmw_a",p.P));d.appendChild(e);g=e;if(1<c.f.length){e=p.createNode("a",null,"kmw_button_a kmw_noleftgap");e.href="#";e.title=p.a.AltKeyboardsPre+c.name+p.a.AltKeyboardsSuf;e.onclick=function(b){return p.Ja(b,c)};var l=p.createNode("div",null,"kmw_a");f=p.truncate(b.Name.replace(/\s?keyboard/i,""),40-p.P.length);l.appendChild(p.W[c.id]=p.createNode("span",null,"kmw_kbd",f));e.appendChild(l);e.appendChild(p.createNode("div",null,"kmw_drop"));
d.appendChild(e);p.D[c.id]=p.createNode("ul",null,"kmw_selector_kbd");p.D[c.id].style.display="none";for(var k in c.f)l=p.createNode("li"),f=c.f[k].Name.replace(/\s?keyboard/i,""),f=f+" ["+c.f[k].Na+"]",e=p.createNode("a",null,null,f),e.href="#",e.title="",e.onclick=function(b,c){return function(d){return p.L(d,b,c)}}(c,c.f[k]),l.appendChild(e),p.D[c.id].appendChild(l);d.appendChild(p.D[c.id])}p.X.appendChild(d);p.b.push({Y:p.fa++,lang:c,V:b,O:d,aa:g})}else{p.b[d].Y=p.fa++;p.b[d].V=b;if(k=p.W[c.id])f=
b.Name.replace(/\s?keyboard/i,""),k.innerHTML=p.truncate(f,40-p.P.length);p.b[d].aa&&(f=p.a.SelectKeyboardPre+b.Name,g=p.a.SelectKeyboardSuf,0>f.toLowerCase().indexOf(g.toLowerCase())&&(f=f+" "+g),p.b[d].aa.title=f)}};p.truncate=function(c,b){return c.length<=b?c:c.substr(0,b-1)+"\u2026"};p.Ia=function(){p.M=!0;p.I&&clearTimeout(p.I);p.I=setTimeout(p.N,2E3)};a.addEventListener("keyboardregistered",p.Ia);p.B=function(c){var b=p.ga;b&&(b.style.display="none");p.S();return p.h(c)};p.Ja=function(c,b){p.K(c);
if(b=p.D[b.id]){if("block"==b.style.display)return p.B(c);b.style.display="block";p.ga=b;p.$(b,p.B)}return p.h(c)};p.ja=function(c,b){var d=p.J(b);return(d=null==d?b.f[0]:p.b[d].V)?p.L(c,b,d):!1};p.L=function(c,b,d){if(p.G){var e=p.J(p.G);null!=e&&(p.b[e].O.className="kmw_button")}p.F.className="kmw_button";p.G=b;p.A=d;p.ta=b.id;p.H();p.ba(b,d);a.setActiveKeyboard(d.InternalName,b.id);p.b[p.J(b)].O.className="kmw_button_selected";p.ia();p.U();return p.K(c)||p.B(c)};p.U=function(){var c=[p.F,p.ha,
p.i,p.R],b=!1;a.isCJK(p.A)?b=!0:null==p.A&&(b="none"==c[2].style.display);if(null!=p.A||0<p.b.length)for(var d=0;d<c.length;d++)c[d].style.display="";else for(d=0;d<c.length;d++)c[d].style.display="none";b?p.i.style.display=p.R.style.display="none":null==p.A&&(p.i.className="kmw_button_disabled");p.c.parentNode.style.visibility="visible"};p.H=function(){a.focusLastActiveElement()};p.La=function(c){h&&""!=a.getActiveKeyboard()&&(h.isEnabled()?h.hide():h.show(!0));p.H();return p.h(c)};p.Ea=function(c){if("kmw_controls_disabled"!=
p.c.className){p.B(null);if(p.G){var b=p.J(p.G);null!=b&&(p.b[b].O.className="kmw_button")}p.A=null;p.G=null;p.ta="";p.F.className="kmw_button_selected"}p.H();a.setActiveKeyboard("","");p.ia();p.U();return p.h(c)};p.h=function(c){c||(c=window.event);window.event&&(window.event.returnValue=!1);c&&(c.cancelBubble=!0);return!1};p.Z=function(c,b){var d=p.v;if(!d)return p.h(c);d.className="kmw_browsemap_"+b;"undefined"==typeof p.m[b]&&(p.M=!0,p.N());p.m[b].style.display="block";p.l[b].className="selected";
null!=p.j&&p.j!=b&&(p.m[p.j].style.display="none",p.l[p.j].className="");p.j=b;return p.h(c)};p.ka=function(c,b){p.v.className=null==p.j?"":"kmw_browsemap_"+p.j;p.l[b].className=p.j==b?"selected":"";return p.h(c)};p.ea=function(c,b){p.v.className="kmw_browsemap_"+b+"_sel";p.l[b].className="hover";return p.h(c)};p.Ha=function(c){return c.getAttribute?c.getAttribute("kmw_disable")||c.kmw_disable:c.kmw_disable};p.ya=function(c){if(!p.C)return!0;c=c.target;if("textarea"==c.tagName.toLowerCase()||"input"==
c.tagName.toLowerCase()&&"text"==c.type.toLowerCase())if(p.Ba=c,p.Ha(c))"kmw_controls_disabled"!=p.c.className&&(p.c.className="kmw_controls_disabled");else{null!=p.A&&(a.isCJK()?p.i.style.display=p.R.style.display="none":p.i.className=h&&h.isEnabled()?"kmw_button_selected":"kmw_button");""!=p.c.className&&(p.c.className="");var b=c.la?c.la:64;var d=c.ma?c.ma:0;p.za=n.getAbsoluteX(c)+b;p.Aa=n.getAbsoluteY(c)+c.offsetHeight+d}return!0};a.addEventListener("controlfocused",p.ya);p.wa=function(){if(!p.C)return!0;
"none"!=p.i.style.display&&(p.i.className="kmw_button_disabled");return!0};a.addEventListener("controlblurred",p.wa);p.xa=function(c){var b=c.internalName;c=c.languageCode;if(""!=c&&""!=b&&(c=p.languages[c],null!=c))for(var d=0;d<c.f.length;d++)c.f[d].InternalName==b&&(p.L(null,c,c.f[d]),window.focus(),p.H());return!0};a.addEventListener("keyboardchange",p.xa);p.Ga=function(c){p.C&&(p.i.className="kmw_button_selected");return c};h.addEventListener("show",p.Ga);p.Fa=function(c){p.C&&c.HiddenByUser&&
(p.i.className="kmw_button")};h.addEventListener("hide",p.Fa);p.Ka=function(c){p.N();if("kmw_controls_disabled"==p.c.className)return p.h(c);p.B(null);if("kmw_over"==p.u.className)return p.K(c);p.u.className="kmw_over";p.w.className="kmw_button_selected";p.$(p.u,p.K);return p.h(c)};p.K=function(c){p.u.className="";p.w.className="kmw_button";p.S();return p.h(c)};p.da=function(c){var b=p.ga;if((!b||"none"==b.style.display)&&""==p.u.className)return!0;p.K(c);p.B(c);return p.h(c)};var r=null,t=null,u=
null;p.T=function(c){var b=c&&c.target||window.event&&window.event.srcElement;if(b)for(;b.parentNode;){if(b==t)return null;b=b.parentNode}"#document"==b.nodeName&&p.da(c);return r};p.$=function(c,b){p.T==document.onclick&&p.S();r=b;t=c;u=document.onclick;document.onclick=p.T};p.S=function(){p.T==document.onclick&&(document.onclick=u,t=r=u=null)};p.Ca=function(){var c="",b=n.loadCookie("KeymanWeb_Keyboard");void 0!=b.current&&(c=b.current.split(":")[0]);b=n.loadCookie("KeymanWeb_Toolbar");void 0!=
b.region&&(p.j=b.region);if(void 0!=b.maxrecent)for(var d=0;d<b.maxrecent;d++){if(void 0!=b["recent"+d]){var e=b["recent"+d].split(",");if(2==e.length){var f=p.languages[e[0]];if(null!=f)for(var g=0;g<f.f.length;g++)if(f.f[g].InternalName==e[1]){p.ba(f,f.f[g]);if(f.f[g].InternalName==c){p.L(null,f,f.f[g]);window.focus();p.H();break}break}}}}else if(c=a.getActiveKeyboard(),g=a.getActiveLanguage(),""!=g&&""!=c&&(b=p.languages[g],null!=b))for(g=0;g<b.f.length;g++)b.f[g].InternalName==c&&(p.L(null,b,
b.f[g]),window.focus(),p.H())};p.ia=function(){var c={};c.region=p.j;c.maxrecent=""+p.b.length;for(var b=0;b<p.b.length;b++)c["recent"+b]=p.b[b].lang.id+","+p.b[b].V.InternalName;n.saveCookie("KeymanWeb_Toolbar",c)}}catch(c){};}());
//# sourceMappingURL=kmwuitoolbar.js.map
